if random_choice(): mark_position()
if not random_choice(): turn_left()
turn_down()
if marked_backward: set_flag_b()
if flag_a: go_to_flag_b()
if not marked_backward: turn_left()
if not random_choice(): clear_flag_b()
if flag_a: nop()
if can_move_backward: set_flag_b()
if not getting_closer(): go_to_flag_b()
if check_visited_position(): set_flag_b()
if not check_no_progress(): turn_right()
if marked_current: turn_left()
if not marked_backward: turn_up()
if check_visited_position(): go_to_flag_a()
if random_choice(): turn_up()
move_backward()
if not random_choice(): go_to_flag_b()
go_to_flag_a()
if marked_forward: clear_flag_b()
if not getting_closer(): nop()
if not marked_forward: turn_random()
if getting_closer(): go_to_flag_a()
if marked_current: clear_flag_b()
if not marked_backward: unmark_position()
if can_move_backward: turn_right()
if not can_move_backward: turn_right()
if check_visited_position(): move_backward()
if not can_move_backward: go_to_flag_b()
if can_move_forward: mark_position()
