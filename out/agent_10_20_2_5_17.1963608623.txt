if not check_no_progress(): turn_down()
if marked_current: clear_flag_a()
if can_move_backward: mark_position()
if not marked_current: turn_random()
if not random_choice(): unmark_position()
if not can_move_forward: mark_position()
turn_left()
if not check_no_progress(): turn_random()
if random_choice(): move_forward()
if not check_no_progress(): turn_down()
if not can_move_forward: turn_up()
if not random_choice(): turn_up()
if not getting_closer(): nop()
if can_move_forward: mark_position()
if check_visited_position(): turn_down()
if random_choice(): move_forward()
if not flag_a: turn_up()
if marked_current: go_to_flag_b()
if not random_choice(): unmark_position()
if not getting_closer(): nop()
