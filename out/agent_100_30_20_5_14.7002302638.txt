if not can_move_forward: turn_left()
if check_no_progress(): unmark_position()
if marked_backward: move_forward()
if random_choice(): clear_flag_a()
if flag_b: turn_left()
if not flag_b: go_to_flag_a()
if not flag_b: nop()
if flag_b: unmark_position()
if check_no_progress(): set_flag_a()
if not marked_current: turn_up()
if marked_backward: unmark_position()
turn_down()
if check_no_progress(): nop()
if not flag_b: turn_right()
if marked_current: move_backward()
move_forward()
if not can_move_forward: set_flag_b()
if flag_b: set_flag_a()
if check_no_progress(): move_backward()
if not can_move_forward: clear_flag_a()
if can_move_forward: nop()
if not can_move_forward: mark_position()
if flag_a: clear_flag_a()
if check_visited_position(): turn_random()
if not check_visited_position(): turn_left()
if not random_choice(): turn_down()
if random_choice(): set_flag_a()
if not flag_a: move_forward()
if check_visited_position(): set_flag_b()
if can_move_backward: turn_random()
